# Title of Paper: 
An Alternative Metric for Evaluating the Potential Benefit of Response-Adaptive Randomization

# Purpose of the R Scripts:
These programs allow the user to reporoduce our simulation study and find the maximum sample sizes and posterior probability stopping boundaries that control the frequentist properties of the Bayesian response-adaptive randomization designs (i.e. maintain type I error rate and power at the desired levels).

# Brief Description of the R Scripts:

# 1. RAR-find-nmax.R
These functions may be used to determine the maximum sample size and posterior probability stopping boundaries required to achieve a targeted power and a two-sided type I error rate of 0.05 for a Bayesian RAR group sequential design. These designs are implemented using a logistic regression probability model with weakly informative t-dsitribution priors for beta0 and beta1. The mass-weighted urn design is used to limit deviations from the targeted allocation. Users may implement these designs using 1 of 8 adaptive modifications to the randomization probability: "restrict", "exponent", "neyman", "optimal", "DABCD-ney", "DABCD-opt", "ERADE-ney", "ERADE-opt," each of which are described in detail in our manuscript. Designs may also be implemented using 1 of 4 different boundary shapes: 1) symmetric Pocock-like boundaries, 2) symmetric OBF-like boundaries, 3) a Pocock-like efficacy boundary with an OBF-like futility boundary, or 4) an OBF-like efficacy boundary with an OBF-like futility boundary. The inputs, outputs, and purposes of each function in this file are described in detail in the R script. An example for the user is provided.

# 2. RAR-simulate-trial-and-compute-m:
These functions may be used to simulate a Bayesian RAR group sequential clinical trial using the potential outcomes framework discussed in Section 4.1 of the above manuscript. The posterior probability stopping boundaries found using the RAR-find-nmax.R script are applied to the trial to allow for early stopping. A trial is stopped early if the posterior probability that the treatment is better than the control exceeds a stopping boundary. The following metrics are computed: trial sample size, number of participants assigned to the treatment arm, number of participants assigned to the control arm, number of responders in the treatment arm, number of responders in the control arm, total number non-responders in the actual trial, total number of non-responders in the potential study sample (i.e the quantity m defined in equation (1) of the above manuscript), a binary indicator for whether the trial was stopped early for efficacy, and a binary indicator for whether the trial was stopped early for harm or futility as appropriate. The inputs, outputs, and purposes of each function in this file are described in detail in the R script. An example is provided for the user. Note that our proposed design comparison metric mj may be computed by taking the average of the quantity m over all simulated trials.

# 3. Freq_Potential_Outcomes_Functions:
These functions may be used to simulate a classical frequentist group sequential clinical trial using the potential outcomes framework discussed in Section 4.1 of the above manuscript. Users should use the "gsDesign" package to find the maximum sample size and stopping boundaries that achieve the targeted power and type I error rate for the desired design. Users may use 1 of the following 3 two-sample binomial proportion tests: Fisher's exact test, the chi-square test, or an unconditional exact test. A trial is stopped early if the two-sided p-value from the chosen two-sample binomial proportion test is smaller than the two-sided p-value corresponding to the z-score stopping boundary at a given interim analysis. The following metrics are computed: trial sample size, number of participants assigned to the treatment arm, number of participants assigned to the control arm, number of responders in the treatment arm, number of responders in the control arm, total number non-responders in the actual trial, total number of non-responders in the potential study sample (i.e the quantity m defined in equation (1) of the above manuscript), a binary indicator for whether the trial was stopped early for efficacy, and a binary indicator for whether the trial was stopped early for harm or futlity as appropriate. The inputs, outputs, and purposes of each function in this file are described in detail in the R script. An example is provided for the user. Note that our proposed design comparison metric mj may be computed by taking the average of the quantity m over all simulated trials. 
